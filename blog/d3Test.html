<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>STS Animation</title>
		<script type="text/javascript" src="https://d3js.org/d3.v5.js"></script>
	</head>
	<body>
		<button onclick="triggerShear()">Apply Shear in X direction</button>
		<button onclick="triggerReset()">Undo Shear in X direction</button>
		<script type="text/javascript">
			var lineData = [ { "x": 10, "y": 10}, { "x": 110, "y": 10}, 
					 { "x": 110, "y": 110}, { "x": 210, "y": 110}, 
					 { "x": 210, "y": 210}, { "x": 10, "y": 210}, 
					 { "x": 10, "y": 10}];

			var transitionData = [ { "x": 410, "y": 10}, { "x": 510, "y": 10},
					       { "x": 310, "y": 110}, { "x": 410, "y": 110},
					       { "x": 210, "y": 210}, { "x": 10, "y": 210},
					       { "x": 410, "y": 10}];

			var lineFunction = d3.line()
						.x(function(d) { return d.x; })
						.y(function(d) { return d.y; })
						.curve(d3.curveLinear);
			
			var svgContainer1 = d3.select("body").append("svg")
						.attr("width",600)
						.attr("height",400);

			var STS = svgContainer1.append("path")
						.attr("d", lineFunction(lineData))
						.attr("stroke","blue")
						.attr("stroke-width",4)
						.attr("fill","none")
						.attr("id","mySTS");
			
			function triggerShear(){
				d3.select("#mySTS")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(transitionData))
			}

			function triggerReset(){
				d3.select("#mySTS")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(lineData))
			}

			var A1Data = [ { "x": 10, "y": 10}, { "x": 110, "y": 10},
					   { "x": 110, "y": 60}, { "x": 10, "y": 10}];

			var A2Data = [ { "x": 10, "y": 10}, { "x": 110, "y": 60}, 
					   { "x": 110, "y": 110}, { "x": 10, "y": 60},
					   { "x": 10, "y": 10}];

			var A3Data = [ { "x": 10, "y": 60}, { "x": 110, "y": 110},
					   { "x": 10, "y": 110}, { "x": 10, "y": 60}];

			var B1Data = [ { "x": 10, "y": 110}, { "x": 110, "y": 110}, 
					   { "x": 110, "y": 160}, { "x": 10, "y": 110}];

			var B2Data = [ { "x": 10, "y": 110}, { "x": 110, "y": 160}, 
					   { "x": 110, "y": 210}, { "x": 10, "y": 160},
					   { "x": 10, "y": 110}];

			var B3Data = [ { "x": 10, "y": 160}, { "x": 110, "y": 210},
					   { "x": 10, "y": 210}, { "x": 10, "y": 160}];

			var C1Data = [ { "x": 110, "y": 110}, { "x": 210, "y": 110}, 
					   { "x": 210, "y": 160}, { "x": 110, "y": 110}];

			var C2Data = [ { "x": 110, "y": 110}, { "x": 210, "y": 160}, 
					   { "x": 210, "y": 210}, { "x": 110, "y": 160},
					   { "x": 110, "y": 110}];

			var C3Data = [ { "x": 110, "y": 160}, { "x": 210, "y": 210},
					   { "x": 110, "y": 210}, { "x": 110, "y": 160}];

			var svgContainer2 = d3.select("body").append("svg")
						.attr("width",600)
						.attr("height",400);

			var A1 = svgContainer2.append("path")
						.attr("d", lineFunction(A1Data))
						.attr("stroke","orange")
						.attr("stroke-width",3)
						.attr("fill", "none")
						.attr("id", "A1");

			var A2 = svgContainer2.append("path")
						.attr("d", lineFunction(A2Data))
						.attr("stroke","orange")
						.attr("stroke-width",3)
						.attr("fill", "none")
						.attr("id", "A2");

			var A3 = svgContainer2.append("path")
						.attr("d", lineFunction(A3Data))
						.attr("stroke","orange")
						.attr("stroke-width",3)
						.attr("fill", "none")
						.attr("id", "A3");

			var B1 = svgContainer2.append("path")
						.attr("d", lineFunction(B1Data))
						.attr("stroke","blue")
						.attr("stroke-width",3)
						.attr("fill", "none")
						.attr("id", "B1");

			var B2 = svgContainer2.append("path")
						.attr("d", lineFunction(B2Data))
						.attr("stroke","blue")
						.attr("stroke-width",3)
						.attr("fill", "none")
						.attr("id", "B2");

			var B3 = svgContainer2.append("path")
						.attr("d", lineFunction(B3Data))
						.attr("stroke","blue")
						.attr("stroke-width",3)
						.attr("fill", "none")
						.attr("id", "B3");

			var C1 = svgContainer2.append("path")
						.attr("d", lineFunction(C1Data))
						.attr("stroke","green")
						.attr("stroke-width",3)
						.attr("fill", "none")
						.attr("id", "C1");

			var C2 = svgContainer2.append("path")
						.attr("d", lineFunction(C2Data))
						.attr("stroke","green")
						.attr("stroke-width",3)
						.attr("fill", "none")
						.attr("id", "C2");

			var C3 = svgContainer2.append("path")
						.attr("d", lineFunction(C3Data))
						.attr("stroke","green")
						.attr("stroke-width",3)
						.attr("fill", "none")
						.attr("id", "C3");

			var tA1Data = [{ "x": 410, "y": 10}, { "x": 510, "y": 10}, 
				       { "x": 410, "y": 60}, { "x": 410, "y": 10}];

			var tA2Data = [{ "x": 410, "y": 10}, { "x": 410, "y": 60},
				       { "x": 310, "y": 110}, { "x": 310, "y": 60},
				       { "x": 410, "y": 10}];

			var tA3Data = [{ "x": 310, "y": 60}, {"x": 310, "y": 110},
				       { "x": 210, "y": 110}, { "x": 310, "y": 60}];

			var tB1Data = [{ "x": 210, "y": 110}, { "x": 310, "y": 110},
				       { "x": 210, "y": 160}, { "x": 210, "y": 110}];

			var tB2Data = [{ "x": 210, "y": 110}, { "x": 210, "y": 160}, 
				       { "x": 110, "y": 210}, { "x": 110, "y": 160}, 
				       { "x": 210, "y": 110}];

			var tB3Data = [{ "x": 110, "y": 160}, { "x": 110, "y": 210},
				       { "x": 10, "y": 210}, { "x": 110, "y": 160}];

			var tC1Data = [{ "x": 310, "y": 110}, { "x": 410, "y": 110}, 
				       { "x": 310, "y": 160}, { "x": 310, "y": 110}];

			var tC2Data = [{ "x": 310, "y": 110}, { "x": 310, "y": 160},
				       { "x": 210, "y": 210}, { "x": 210, "y": 160}, 
				       { "x": 310, "y": 110}];

			var tC3Data = [{ "x": 210, "y": 160}, { "x": 210, "y": 210},
				       { "x": 110, "y": 210}, { "x": 210, "y": 160}];

			// Step 1 Cut and Paste

			var s1A1Data = [{ "x": 310, "y": 10}, { "x": 410, "y": 10},
				       { "x": 310, "y": 60}, { "x": 310, "y": 10}];

			// Step 2 Cut and Paste

			var s2A1Data = [{ "x": 210, "y": 10}, { "x": 310, "y": 10},
				       { "x": 210, "y": 60}, { "x": 210, "y": 10}];

			var s2A2Data = [{ "x": 310, "y": 10}, { "x": 310, "y": 60},
				       { "x": 210, "y": 110}, { "x": 210, "y": 60},
				       { "x": 310, "y": 10}];

			// Step 3 Cut and Paste

			var s3C1Data = [{ "x": 110, "y": 110}, { "x": 210, "y": 110}, 
				       { "x": 110, "y": 160}, { "x": 110, "y": 110}];

			// Step 4 Cut and Paste 

			var s4A1Data = [{ "x": 10, "y": 10}, { "x": 110, "y": 10},
				       { "x": 10, "y": 60}, { "x": 10, "y": 10}];

			var s4A2Data = [{ "x": 110, "y": 10}, { "x": 110, "y": 60},
				       { "x": 10, "y": 110}, { "x": 10, "y": 60},
				       { "x": 110, "y": 10}];

			var s4A3Data = [{ "x": 110, "y": 60}, {"x": 110, "y": 110},
				       { "x": 10, "y": 110}, { "x": 110, "y": 60}];

			var s4B1Data = [{ "x": 10, "y": 110}, { "x": 110, "y": 110},
				       { "x": 10, "y": 160}, { "x": 10, "y": 110}];

			var s4C2Data = [{ "x": 110, "y": 110}, { "x": 110, "y": 160},
				       { "x": 10, "y": 210}, { "x": 10, "y": 160}, 
				       { "x": 110, "y": 110}];

			// Transition functions

			function triggerMultiShear(){
				d3.select("#A1")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(tA1Data))

				d3.select("#A2")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(tA2Data))

				d3.select("#A3")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(tA3Data))

				d3.select("#B1")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(tB1Data))

				d3.select("#B2")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(tB2Data))

				d3.select("#B3")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(tB3Data))

				d3.select("#C1")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(tC1Data))

				d3.select("#C2")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(tC2Data))

				d3.select("#C3")
				  .transition()
				  .delay(100)
				  .duration(4000)
				  .attr("d", lineFunction(tC3Data))

			}

			function triggerCutPaste(){

				// Step 1

				d3.select("#A1")
				  .transition()
				  .delay(100)
				  .duration(1000)
				  .attr("d", lineFunction(s1A1Data))
				
				// Step 2
				d3.select("#A1")
				  .transition()
				  .delay(1200)
				  .duration(1000)
				  .attr("d", lineFunction(s2A1Data))

				d3.select("#A2")
				  .transition()
				  .delay(1200)
				  .duration(1000)
				  .attr("d", lineFunction(s2A2Data))

				//Step 3
				d3.select("#C1")
				  .transition()
				  .delay(2300)
				  .duration(2000)
				  .attr("d", lineFunction(s3C1Data))

				//Step 4
				d3.select("#A1")
				  .transition()
				  .delay(4400)
				  .duration(2000)
				  .attr("d", lineFunction(s4A1Data))

				d3.select("#A2")
				  .transition()
				  .delay(4400)
				  .duration(2000)
				  .attr("d", lineFunction(s4A2Data))

				d3.select("#A3")
				  .transition()
				  .delay(4400)
				  .duration(2000)
				  .attr("d", lineFunction(s4A3Data))

				d3.select("#B1")
				  .transition()
				  .delay(4400)
				  .duration(2000)
				  .attr("d", lineFunction(s4B1Data))

				d3.select("#C2")
				  .transition()
				  .delay(4400)
				  .duration(2000)
				  .attr("d", lineFunction(s4C2Data))
			}

		</script>
		<button onclick="triggerMultiShear()">Apply Shear in X direction</button>
		<button onclick="triggerCutPaste()">Cut and Paste</button>
	</body>
</html>
